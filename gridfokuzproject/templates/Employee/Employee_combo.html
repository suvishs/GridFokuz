<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <style>
    h2, h3 {
      text-align: center;
    }
    .pdfbtn {
      display: flex;
      flex-direction: column;
      align-items: center;
  }
    .combotable {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .profit{
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
<h2>Employee Combo Page</h2>
<br>

<div class="combotable">
  <form action="html_to_pdf" method="POST">
    {% csrf_token %}
    {% for i in combo %}
    <table>
      <tr>
        <th>Product Image</th>
        <td>
          <img src="{{i.product_image.url}}" height="100px">
        </td>
      </tr>
      <tr>
        <th>Product Name</th>
        <td>
          {{i.Product_Name}}
        </td>
      </tr>
      <tr>
        <th>MRP</th>
        <td>
          {{i.MRP}}
        </td>
      </tr>
      <tr>
        <th id='Vendor_Price'>Vendor price</th>
        <td>
          {{i.Vendor_Price}}
        </td>
      </tr>
      </tr>
      <tr>
        <th>Profit Percentage</th>
        <td>
          <select name="profit">
            <option value="profit_percentage">Profit Percentage</option>
            <option value="profit_amount">Profit Amount</option>
          </select>
        </td>
      </tr>   
      
      <tr>
        <td colspan="2">
          <div class="profit">
            <input type="number" id="profit" name="profit_input" value="0" placeholder="Profit">
          </div>
        </td>
      </tr>
      
      <tr>
        <th>Branding Cost</th>
        <td>
          <input type="number" id="branding" name="branding_cost" value="0" placeholder="Branding Cost">
        </td>
      </tr>
      <tr>
        <th>Branding Category</th>
        <td>
          <select name="branding_category">
            <option value="Screen print">Screen print</option>
            <option value="Pigment Print">Pigment Print</option>
            <option value="Sublimation print">Sublimation print</option>
            <option value="UV print">UV print</option>
            <option value="Embroidery">Embroidery</option>
            <option value="Engraving">Engraving</option>
            <option value="Wood Engraving">Wood Engraving</option>
            <option value="Embossing">Embossing</option>
            <option value="Debossing">Debossing</option>
            <option value="Laser marking">Laser marking</option>
            <option value="Rubber print">Rubber print</option>
            <option value="Sticker print">Sticker print</option>
            <option value="Screen fusing">Screen fusing</option>
          </select>
        </td>
      </tr>
      <tr>
        <th>Transportation Cost</th>
        <td>
          <input id="transportation" type="number" name="transportation_cost" value="0" placeholder="Transportation Cost">
        </td>
      </tr>
      <tr>
        <th>Trax Percentage</th>
        <td>
          <select id="tax" name="tax">
            <option value="0">0%</option>
            <option value="5">5%</option>
            <option value="12">12%</option>
            <option value="18">18%</option>
            <option value="28">28%</option>
          </select>
        </td>
      </tr>
      <tr>
        <th>Details</th>
        <td>
          <a href="{% url 'product_detail' i.id %}">Details</a>
        </td>
      </tr>
      <input type="hidden" name="productId" value="{{i.id}}"><br>
    </table><br><br>
    {% endfor %}
</div>
<br>

  <input type="hidden" name="total_combo_price" value="{{total_combo_price}}">
    <br>
    <div class="pdfbtn">
      <input type="submit" class="btn btn-warning" value="View Details">
    </div>
  </form>
<br>
<br>
<br>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>



















{% comment %} <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <style>
        h2,h3{
            text-align:center;
        }
        .pdfbtn{
            display:flex;
            flex-direction:column;
            align-items:center;
        }
        .combotable{
            display:flex;
            flex-direction:column;
            align-items:center;
        }
    </style>
  </head>
  <body>
    <h2>Employee Combo Page</h2>

    <div class="combotable">
        <table>
            <tr>
                <th>Product Image</th>
                <th>Product Name</th>
                <th></th>
                <th></th>
                <th>Total price</th>
                <!-- <th>Discount Amount</th> -->
                <th>Discription</th>
                <th>Grand Total</th>
                <th>Details</th>
            </tr>
            <form action="html_to_pdf" method="POST">
                {% csrf_token %}
                {% for i in combo %}
                <tr>
                    <td><img src="{{i.product_image.url}}" width="40px" height="40px"></td>
                    <td>{{i.Product_Name}}</td>
                     <td></td>
                    <td></td> 
                    <td class="Total_GF_price">{{i.Total_GF_price}}</td>
                    <!-- <td><input type="number" name="discount" value=0 step="0.0001" placeholder="Discount Amount"></td> -->
                    <td><textarea type="text" name="temp_discription" placeholder="Enter Discription"></textarea></td>
                    <td><input type="number" name="grand_total" step="0.0001" placeholder="Grand Total"></td>
                    <td><a href="{% url 'Employee_product_detail' i.id %}">Details</a></td>
                </tr>
                <input type="hidden" name="productId" value="{{i.id}}"><br>
                {% endfor %}
        </table>
    </div>
    <br>

    <h3> Total Combo Price : {{total_combo_price}}</h3><br>
    <input type="hidden" name="total_combo_price" value="{{total_combo_price}}">
    <h3>Customer Price: <span id="customer_price"></span></h3><br><br>

    <div class="pdfbtn">
        <label>Price And Discription Need to display or Not</label>
        <input type="checkbox" name="price_display" checked><br>
        <input type="checkbox" name="discription_display" checked><br>
        <input type="submit" class="btn btn-warning" value="Convert To PDF">
        </form>
    </div> 

    <script>
        // Get references to the input fields
        const discountInputs = document.querySelectorAll('input[name="discount"]');
        const totalInputs = document.querySelectorAll('td:nth-child(5)');
        const grandTotalInputs = document.querySelectorAll('input[name="grand_total"]');

        // Set the initial values of the grand total input fields and calculate the initial customer price
        let customerPrice = 0;
        grandTotalInputs.forEach((grandTotalInput, index) => {
            grandTotalInput.value = totalInputs[index].textContent;
            customerPrice += parseFloat(grandTotalInput.value) || 0;
        });

        // Set the initial value of the Customer Price text
        document.getElementById('customer_price').textContent = customerPrice.toFixed(2);

        // Listen for changes in the discount input fields
        discountInputs.forEach((discountInput, index) => {
            discountInput.addEventListener('input', () => {
                // Calculate the new grand total
                const defaultDiscount = 0;
                const discount = parseFloat(discountInput.value) || defaultDiscount;
                const total = parseFloat(totalInputs[index].textContent) || 0;
                const grandTotal = total - discount;

                // Update the grand total input field
                grandTotalInputs[index].value = grandTotal.toFixed(2);

                // Calculate the total of all the grand total values
                customerPrice = 0;
                grandTotalInputs.forEach((grandTotalInput) => {
                    customerPrice += parseFloat(grandTotalInput.value) || 0;
                });

                // Update the Customer Price text with the total
                document.getElementById('customer_price').textContent = customerPrice.toFixed(2);
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
    </script>

  </body>
</html> {% endcomment %}